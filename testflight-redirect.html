<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download TestFlight - JetLagPro</title>
    <script src="load-common-head.js?v=20250911094117"></script>
    <link rel="stylesheet" href="styles.css?v=20250911094117">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <style>
        .redirect-container {
            max-width: 600px;
            margin: 100px auto;
            padding: 40px;
            text-align: center;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
        }
        
        .redirect-icon {
            font-size: 64px;
            margin-bottom: 20px;
        }
        
        .redirect-title {
            font-size: 28px;
            color: #1f2937;
            margin-bottom: 16px;
        }
        
        .redirect-subtitle {
            font-size: 18px;
            color: #6b7280;
            margin-bottom: 32px;
            line-height: 1.6;
            text-align: left;
        }
        
        .redirect-buttons {
            display: flex;
            flex-direction: column;
            gap: 16px;
            align-items: center;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 24px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            font-size: 16px;
            transition: all 0.2s;
            min-width: 200px;
        }
        
        .btn-primary {
            background: #3b82f6;
            color: white;
        }
        
        .btn-primary:hover {
            background: #2563eb;
        }
        
        .btn-secondary {
            background: #f3f4f6;
            color: #374151;
            border: 2px solid #d1d5db;
        }
        
        .btn-secondary:hover {
            background: #e5e7eb;
        }
        
        .countdown {
            font-size: 14px;
            color: #9ca3af;
            margin-top: 20px;
        }
        
        @media (max-width: 768px) {
            .redirect-container {
                margin: 50px 20px;
                padding: 30px 20px;
            }
            
            .redirect-title {
                font-size: 24px;
            }
            
            .redirect-subtitle {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
    <div class="redirect-container">
        <div class="redirect-icon">
            <img src="/favicon.ico" alt="JetLagPro Logo" style="width: 64px; height: 64px;">
        </div>
        <h1 class="redirect-title">Click on the link below to install TestFlight and JetLagPro</h1>
        <p class="redirect-subtitle">
            To run JetLagPro (beta test version), we need TestFlight (Apple's free testing app) to install it. The link below will either take you to the app store to install TestFlight or open it directly.
            </p>
        <p class="redirect-subtitle">    
            When TestFlight opens, it may ask for a number of "I agrees" before taking you to the actual JetLagPro install. At some point in the process you will need to paste the Redeem Code that we copied to your clipboard. </p>
        </p>
        <p class="redirect-subtitle">
            If you get lost after TestFlight installs, you can always return here and click the link again. 
        </p>
        
        <div class="redirect-buttons">
            <a href="https://testflight.apple.com/join/YZc7jzJT" class="btn btn-primary" onclick="copyRedeemCode(event)">
                ✅ Install TestFlight and when asked, paste the saved Redeem Code
            </a>
           
        </div>
        
    </div>

    <script>
        // Auto-redirect functionality removed - users now have full control

        // TestFlight Auto-Copy Redeem Code Functionality
        function copyRedeemCode(event) {
            const redeemCode = 'YZc7jzJT';
            
            // Try to copy to clipboard
            if (navigator.clipboard && window.isSecureContext) {
                // Modern clipboard API
                navigator.clipboard.writeText(redeemCode).then(() => {
                    showCopySuccess();
                }).catch(() => {
                    // Fallback for clipboard API failure
                    fallbackCopy(redeemCode);
                });
            } else {
                // Fallback for older browsers or non-secure contexts
                fallbackCopy(redeemCode);
            }
        }

        function fallbackCopy(text) {
            // Create a temporary textarea element
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                const successful = document.execCommand('copy');
                if (successful) {
                    showCopySuccess();
                } else {
                    showCopyError();
                }
            } catch (err) {
                showCopyError();
            }
            
            document.body.removeChild(textArea);
        }

        function showCopySuccess() {
            // Create and show success notification
            const notification = document.createElement('div');
            notification.id = 'copy-notification';
            notification.innerHTML = `
                <div style="
                    position: fixed;
                    top: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: #10b981;
                    color: white;
                    padding: 16px 24px;
                    border-radius: 8px;
                    box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
                    z-index: 10000;
                    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
                    font-size: 14px;
                    font-weight: 500;
                    max-width: 90vw;
                    text-align: center;
                    animation: slideInDown 0.3s ease-out;
                ">
                    ✅ Redeem code copied to your clipboard! Please paste it in TestFlight when prompted.
                </div>
            `;
            
            // Add CSS animation if not already present
            if (!document.querySelector('#copy-notification-styles')) {
                const style = document.createElement('style');
                style.id = 'copy-notification-styles';
                style.textContent = `
                    @keyframes slideInDown {
                        from { opacity: 0; transform: translateX(-50%) translateY(-20px); }
                        to { opacity: 1; transform: translateX(-50%) translateY(0); }
                    }
                `;
                document.head.appendChild(style);
            }
            
            document.body.appendChild(notification);
            
            // Auto-remove after 5 seconds
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }

        function showCopyError() {
            // Show error notification if copy fails
            const notification = document.createElement('div');
            notification.innerHTML = `
                <div style="
                    position: fixed;
                    top: 20px;
                    left: 50%;
                    transform: translateX(-50%);
                    background: #ef4444;
                    color: white;
                    padding: 16px 24px;
                    border-radius: 8px;
                    box-shadow: 0 4px 12px rgba(239, 68, 68, 0.3);
                    z-index: 10000;
                    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
                    font-size: 14px;
                    font-weight: 500;
                    max-width: 90vw;
                    text-align: center;
                ">
                    ⚠️ Could not copy automatically. Redeem code: YZc7jzJT
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }
    </script>
</body>
</html>
