<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jet Lag Research Survey - JetLagPro</title>
    
    <!-- Aggressive cache busting -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="description" content="Participate in our jet lag research survey. Your feedback helps improve jet lag management for travelers worldwide.">
    <meta name="keywords" content="jet lag research, chronoacupuncture survey, travel research, jet lag study">
    <script>
        // Eternal cache busting solution - auto-generates timestamp
        const cacheVersion = Math.floor(Date.now() / 1000);
        document.write('<link rel="stylesheet" href="survey.css?v=' + cacheVersion + '">');
    </script>
    <script src="load-common-head.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="main-header"></div>

    <main>
        <section class="hero-simple">
            <div class="container">
                <h1>Jet Lag Research Survey</h1>
            </div>
        </section>

        <div class="survey-main-column">

            <!-- Survey Preview Section -->
            <section class="survey-preview survey-card">
                <div class="container">
                    <div class="preview-content">
                        <h2>Survey Preview</h2>
                        <p style="text-align: left;">Below is a preview of the research survey questions. To participate, follow the instructions below.</p>
                        
                        <div class="preview-notice">
                            <div class="notice-box">
                                <h4>ðŸ”¬ Research Participation</h4>
                                <p>To participate:</p>
                                <ol>
                                    <li>Download the JetLagPro app</li>
                                    <li>Complete a journey in the app</li>
                                    <li>Click the survey link in the app</li>
                                </ol>
                            </div>
                        </div>
                        
                        <div class="code-input-section" style="display: none;">
                            <label for="surveyCode">Survey Code (Required for Submission):</label>
                            <input type="text" id="surveyCode" placeholder="Enter your survey code (e.g., JLP-XXXXXXXX)" maxlength="12">
                            <button type="button" id="validateCode" class="btn btn-primary">Enable Survey Submission</button>
                        </div>
                        
                        <div id="validationMessage" class="validation-message"></div>
                    </div>
                </div>
            </section>

            <!-- Survey Content (always visible, but submission disabled without code) -->
            <div id="surveyContent" class="survey-layout-container survey-card">

                    <!-- LJLQ-based survey - Single scrollable form -->
                    <div class="survey-content">
                      

                      <h3>Jet Lag Questions</h3>
                      <form id="travelForm">
                        <!-- General Anticipated Jet Lag Question -->
                        <div class="symptom-group">
                          <h4>Overall anticipated jet lag severity</h4>
                          <div class="symptom-row">
                            <div class="rating-container">
                              <div class="rating-bubbles">
                                <input type="radio" name="generalAnticipated" value="1" id="general_anticipated_1" class="rating-input">
                                <label for="general_anticipated_1" class="rating-bubble"></label>
                                <input type="radio" name="generalAnticipated" value="2" id="general_anticipated_2" class="rating-input">
                                <label for="general_anticipated_2" class="rating-bubble"></label>
                                <input type="radio" name="generalAnticipated" value="3" id="general_anticipated_3" class="rating-input">
                                <label for="general_anticipated_3" class="rating-bubble"></label>
                                <input type="radio" name="generalAnticipated" value="4" id="general_anticipated_4" class="rating-input">
                                <label for="general_anticipated_4" class="rating-bubble"></label>
                                <input type="radio" name="generalAnticipated" value="5" id="general_anticipated_5" class="rating-input">
                                <label for="general_anticipated_5" class="rating-bubble"></label>
                              </div>
                              <div class="rating-labels">
                                <span>None</span>
                                <span>Severe</span>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div class="symptom-group">
                          <h4>Post Travel Sleep disturbance</h4>
                          <div class="symptom-row">
                            <div class="rating-container">
                              <div class="rating-bubbles">
                                <input type="radio" name="sleepPost" value="1" id="sleep_post_1" class="rating-input">
                                <label for="sleep_post_1" class="rating-bubble"></label>
                                <input type="radio" name="sleepPost" value="2" id="sleep_post_2" class="rating-input">
                                <label for="sleep_post_2" class="rating-bubble"></label>
                                <input type="radio" name="sleepPost" value="3" id="sleep_post_3" class="rating-input">
                                <label for="sleep_post_3" class="rating-bubble"></label>
                                <input type="radio" name="sleepPost" value="4" id="sleep_post_4" class="rating-input">
                                <label for="sleep_post_4" class="rating-bubble"></label>
                                <input type="radio" name="sleepPost" value="5" id="sleep_post_5" class="rating-input">
                                <label for="sleep_post_5" class="rating-bubble"></label>
                              </div>
                              <div class="rating-labels">
                                <span>None</span>
                                <span>Severe</span>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="symptom-group">
                          <h4>Post Travel Daytime fatigue</h4>
                          <div class="symptom-row">
                            <div class="rating-container">
                              <div class="rating-bubbles">
                                <input type="radio" name="fatiguePost" value="1" id="fatigue_post_1" class="rating-input">
                                <label for="fatigue_post_1" class="rating-bubble"></label>
                                <input type="radio" name="fatiguePost" value="2" id="fatigue_post_2" class="rating-input">
                                <label for="fatigue_post_2" class="rating-bubble"></label>
                                <input type="radio" name="fatiguePost" value="3" id="fatigue_post_3" class="rating-input">
                                <label for="fatigue_post_3" class="rating-bubble"></label>
                                <input type="radio" name="fatiguePost" value="4" id="fatigue_post_4" class="rating-input">
                                <label for="fatigue_post_4" class="rating-bubble"></label>
                                <input type="radio" name="fatiguePost" value="5" id="fatigue_post_5" class="rating-input">
                                <label for="fatigue_post_5" class="rating-bubble"></label>
                              </div>
                              <div class="rating-labels">
                                <span>None</span>
                                <span>Severe</span>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="symptom-group">
                          <h4>Post Travel Difficulty concentrating</h4>
                          <div class="symptom-row">
                            <div class="rating-container">
                              <div class="rating-bubbles">
                                <input type="radio" name="concentrationPost" value="1" id="concentration_post_1" class="rating-input">
                                <label for="concentration_post_1" class="rating-bubble"></label>
                                <input type="radio" name="concentrationPost" value="2" id="concentration_post_2" class="rating-input">
                                <label for="concentration_post_2" class="rating-bubble"></label>
                                <input type="radio" name="concentrationPost" value="3" id="concentration_post_3" class="rating-input">
                                <label for="concentration_post_3" class="rating-bubble"></label>
                                <input type="radio" name="concentrationPost" value="4" id="concentration_post_4" class="rating-input">
                                <label for="concentration_post_4" class="rating-bubble"></label>
                                <input type="radio" name="concentrationPost" value="5" id="concentration_post_5" class="rating-input">
                                <label for="concentration_post_5" class="rating-bubble"></label>
                              </div>
                              <div class="rating-labels">
                                <span>None</span>
                                <span>Severe</span>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="symptom-group">
                          <h4>Post Travel Irritability</h4>
                          <div class="symptom-row">
                            <div class="rating-container">
                              <div class="rating-bubbles">
                                <input type="radio" name="irritabilityPost" value="1" id="irritability_post_1" class="rating-input">
                                <label for="irritability_post_1" class="rating-bubble"></label>
                                <input type="radio" name="irritabilityPost" value="2" id="irritability_post_2" class="rating-input">
                                <label for="irritability_post_2" class="rating-bubble"></label>
                                <input type="radio" name="irritabilityPost" value="3" id="irritability_post_3" class="rating-input">
                                <label for="irritability_post_3" class="rating-bubble"></label>
                                <input type="radio" name="irritabilityPost" value="4" id="irritability_post_4" class="rating-input">
                                <label for="irritability_post_4" class="rating-bubble"></label>
                                <input type="radio" name="irritabilityPost" value="5" id="irritability_post_5" class="rating-input">
                                <label for="irritability_post_5" class="rating-bubble"></label>
                              </div>
                              <div class="rating-labels">
                                <span>None</span>
                                <span>Severe</span>
                              </div>
                            </div>
                          </div>
                        </div>

                        <div class="symptom-group">
                          <h4>Post Travel Gastrointestinal issues</h4>
                          <div class="symptom-row">
                            <div class="rating-container">
                              <div class="rating-bubbles">
                                <input type="radio" name="giPost" value="1" id="gi_post_1" class="rating-input">
                                <label for="gi_post_1" class="rating-bubble"></label>
                                <input type="radio" name="giPost" value="2" id="gi_post_2" class="rating-input">
                                <label for="gi_post_2" class="rating-bubble"></label>
                                <input type="radio" name="giPost" value="3" id="gi_post_3" class="rating-input">
                                <label for="gi_post_3" class="rating-bubble"></label>
                                <input type="radio" name="giPost" value="4" id="gi_post_4" class="rating-input">
                                <label for="gi_post_4" class="rating-bubble"></label>
                                <input type="radio" name="giPost" value="5" id="gi_post_5" class="rating-input">
                                <label for="gi_post_5" class="rating-bubble"></label>
                              </div>
                              <div class="rating-labels">
                                <span>None</span>
                                <span>Severe</span>
                              </div>
                            </div>
                          </div>
                        </div>
                      </form>

                      <h3 style="margin-top: 40px;">Demographics</h3>
                      <form id="demographicsForm">
                        <div class="demographic-row">
                          <label>Age range</label>
                          <select name="ageRange">
                            <option value="lt18">&lt;18</option>
                            <option value="18-24">18â€“24</option>
                            <option value="25-34">25â€“34</option>
                            <option value="35-44">35â€“44</option>
                            <option value="45-54">45â€“54</option>
                            <option value="55-64">55â€“64</option>
                            <option value="65+">65+</option>
                          </select>
                        </div>
                      </form>
                        <h3 style="margin-top: 40px;">Comments</h3>
                        <p>Please tell us what you like or dislike. What should we do differently?</p>
                        
                        <div class="comment-container">
                            <textarea 
                                id="userComment" 
                                name="userComment" 
                                placeholder="Share your experience, suggestions, or any additional thoughts about chronoacupuncture and jet lag management..."
                                maxlength="1000"
                                rows="4"
                                style="width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-family: inherit; font-size: 16px;"
                            ></textarea>
                            <div class="comment-counter">
                                <span id="commentCharCount">0</span>/1000 characters
                            </div>
                            <div class="comment-note">
                                <small>ðŸ’¡ Your comments are anonymous and will be used for research purposes only.</small>
                            </div>
                        </div>
                        
                        <!-- Submit Button -->
                        <div class="submit-section">
                            <button 
                                id="submitSurveyBtn"
                                onclick="submitSurvey()" 
                                style="
                                    background: #10b981;
                                    color: white;
                                    border: none;
                                    padding: 15px 40px;
                                    border-radius: 8px;
                                    font-size: 18px;
                                    font-weight: bold;
                                    cursor: pointer;
                                "
                            >
                                ðŸš€ Submit Survey
                            </button>
                            <p style="margin-top: 15px; color: #6b7280; font-size: 14px;">
                                Make sure you've entered a valid survey code above before submitting.
                            </p>
                        </div>
                    </div> <!-- End survey-content -->

                    <div class="survey-complete survey-card" id="surveyComplete" style="display: none;">
                        <div class="completion-content">
                            <div class="completion-icon">ðŸŽ‰</div>
                            <h2>Survey Complete!</h2>
                            <p>Thank you for taking our survey.</p>
                            
                            <div class="completion-actions">
                                <a href="index.html" class="btn btn-primary">Return to Home Page</a>
                                <a href="research-paper.html" class="btn btn-secondary" target="_blank">Read Our Research Paper</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 JetLagPro. All rights reserved. | <a href="privacy.html">Privacy Policy</a></p>
        </div>
    </footer>

    <!-- Firebase SDKs -->
    <script type="module">
        // Import the functions you need from the SDKs
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getFirestore, collection, addDoc, doc, updateDoc, getDoc, setDoc, serverTimestamp, arrayUnion } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBcck2Ca7xBjlZcCwTcQBNQUueFsO0wyBA",
            authDomain: "jetlagpro-research.firebaseapp.com",
            projectId: "jetlagpro-research",
            storageBucket: "jetlagpro-research.firebasestorage.app",
            messagingSenderId: "202766013439",
            appId: "1:202766013439:web:c835e22cf3a12332920dca",
            measurementId: "G-8JV71DX3W3"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Make Firebase available globally for survey.js
        window.firebaseApp = app;
        window.firebaseDB = db;
        window.firebaseCollection = collection;
        window.firebaseAddDoc = addDoc;
        window.firebaseDoc = doc;
        window.firebaseUpdateDoc = updateDoc;
        window.firebaseGetDoc = getDoc;
        window.firebaseSetDoc = setDoc;
        window.firebaseServerTimestamp = serverTimestamp;
        window.firebaseArrayUnion = arrayUnion;

        console.log('ðŸ”¥ Firebase initialized successfully');
    </script>
          <script>
          // Eternal cache busting for JavaScript - auto-generates timestamp
          const jsVersion = Math.floor(Date.now() / 1000);
          document.write('<script src="survey.js?v=20250913120000"><\/script>');
      </script>
    
    <!-- Legacy cache refresh script removed - eternal cache busting now handles this -->
    <script>
        // Mobile menu toggle
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.classList.toggle('active');
        }
    </script>

    <div id="main-footer"></div>
    
    <!-- Centralized Components (Header/Footer) -->
    <script src="js/components.js"></script>
    
    <!-- Google Translate (Centralized) -->
    <script src="js/translate.js"></script>
</body>
</html> 